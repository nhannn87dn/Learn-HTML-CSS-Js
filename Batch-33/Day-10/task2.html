<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<button onclick="addToCart1()">Add to Cart 1</button>
<div id="result"></div>
<body>
    <script>
        const getData = () =>{
            if(typeof Storage !== 'undefined'){
                let products = localStorage.getItem('products');
                // náº¿u tá»“n táº¡i thÃ¬ convert sang array
                if(products){
                    return JSON.parse(products);
                }
                
            }
        }


        const products = getData();//array object
        console.log('<<=== ðŸš€ products ===>>',products);

        let html = `<ul>`;

        for (let index = 0; index < products.length; index++) {
            html += `<li>${products[index].name} ${products[index].price} ${products[index].quantity}</li>`;
            
        }
        html += `</ul>`;

        document.querySelector("#result").innerHTML = html;

        
        //arrow function
        const addToCart1 = () => {
            console.log('addToCart');
            let product = {id: 1, name: 'iPhone 4', price: 200, quantity: 1};

            if(typeof Storage !== 'undefined'){
                //náº¿u support thÃ¬ thÃªm product xuá»‘ng local
                let products = localStorage.getItem('products');
                
                console.log('<<=== ðŸš€ products ===>>',products);
                //Láº§n Ä‘áº§u thÃªm
                if(!products){
                    let productsArray = [];
                    //thÃªm sp vÃ o máº£ng
                    productsArray.push(product);
                    //ghi xuá»‘ng localStorage
                    localStorage.setItem('products', JSON.stringify(productsArray));//convert array to json string

                }else{
                    //convert json string to array
                    let productsArray = JSON.parse(products);
                    productsArray.push(product);
                    //ghi xuá»‘ng localStorage
                    localStorage.setItem('products', JSON.stringify(productsArray));

                }
                ///location.reload();

            }else{
                console.log('Browser does not support');
            }
        }

       
    </script>
</body>
</html>