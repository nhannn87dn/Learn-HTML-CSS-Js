<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <div id="result"></div>

    <button onclick="addProduct()">Add</button>
    <button onclick="getProducts()">getProducts</button>
    <button onclick="clearStorage()">Clear All</button>

    <script>

function getProducts(){
            // Lay data len
            let data = sessionStorage.getItem('products');
            data = JSON.parse(data); //convert string to JSON


            let html = '<ul>';
            //Su dung vong lap de tao html hien thi
            data.forEach(function (item, index){
                html += `<li>${item.name} - ${item.price}</li>`;
            });
            html += '</ul>';
            document.getElementById("result").innerHTML = html;
        }
        
        function addProduct(){
            let value = {name: 'iPhone 14', price: 22000000, quantity: 1};
            let keySession = 'products';
             // Check browser support
             if (typeof (Storage) != "undefined") {
                let products = sessionStorage.getItem('products');
                //Lan dau
                if(!products){
                   let arr = [];
                   arr.push(value);
                   sessionStorage.setItem(keySession,JSON.stringify(arr));
                }
                else{
                    products = JSON.parse(products); //convert string to JSON
                    console.log('2',products);
                    //Neu ton tai thi cap nhat gia tri moi vao
                    products.push(value)
                    //convert JSON to String before setItem
                    sessionStorage.setItem(keySession,JSON.stringify(products))

                }
             }
        }

    </script>
</body>
</html>